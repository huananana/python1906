# Vim的使用

### 1.vim的三种模式

**命令模式:**末尾既没有插入的字样也没有冒号

​			(在编辑模式和末行模式下按esc键可以进入命令模式)

编辑模式：末尾会显示'—插入—'/'—insert—'，并且在编辑模式下可以对文件进行输入操作(可以编辑)

​			(在命令模式下按i就可以进入编辑模式)

末行模式：末尾显示冒号，并且冒号后边可以输入内容

​			(在命令模式下输入冒号就可以进入末行模式)

### 2.vim的配置

通过编辑```~/.vimrc```文件或者```/etc/vimrc```文件可以对vim编辑器进行相关配置



### 3.基本操作

1)保存和退出

所有保存和退出的指令都是末行模式下执行的

w - 只保存(相当于ctr+s)

q - 直接退出(只有当前文件的内容全部保存才能直接退出，如果不保存强制退出，需要加！)

wq - 先保存在退出

注意：强制执行在指令后加！



scp 文件路径 公网ip: 文件放置路径



2)光标操作

所有光标操作对应的指令都是在命令模式下执行的

^ - 直接将光标移动到行首

$ - 直接将光标移动到行尾

G - 移动到文件末尾

gg - 移动到文件开头

**行号G** - 移动到指定行号的位置



3)文本操作

以下指令前面如果没有冒号表示再命令模式下执行，有冒号的再末行模式下执行

dd - 删除光标当前所在的行

数字dd - 数字如果是N，从光标所在的位置开始删N行

:%d - 末行模式下输入%d，删除所有



u - 撤销

ctr + r - 反撤销



yy - 复制光标所在的行

数字yy - 数字如果是N，从光标所在的位置看是复制N行

p - 粘贴



4)查找

/正则表达式 - 查找当前文件中符合正则表达式的内容(结果可以用n和N来切换)

```shell
vim中正则表达式的要求：
1)python正则中所有的语法都有效
2)单独使用有特殊功能的符号，在使用的时候需要加\才有效
r'\d+' -> /\d\+
r'\d{3}' -> /\d\{3}
r'and|or' -> /and\|or
```

:1,$s/被替换的对象对应的正则/替换内容/参数 - 将文件中正则匹配到的内容替换成指定内容

```shell
参数:
g - 全局匹配(会替换所有符合要求的字符串，默认情况下一行只替换一个)
i - 匹配的时候忽略大小写
c - 替换的时候给出提示
e - 忽略错误(忽略正则的错误)
```





### 4.高级操作

1)比较文件

vim -d 文件路径1 文件路径2

2)同时打开和编辑多个文件

vim 文件路径1 文件路径2

```shell
#1.切换窗口内容
在末行模式下输入：ls 可以查看当前打开的所有的文件和文件对象的标号
再末行模式下输入：b标号 可以将当前窗口中的内容切换到指定标号对应的文件的内容

#2.窗口的拆分
再末行模式下输入：sp/vs 可以将当前窗口垂直方向/水平方向进行拆分；后可以在命令模式下按ctr + w 来切换窗口
```

